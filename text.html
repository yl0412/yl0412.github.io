<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>éº¦å…‹é£æƒé™ç”³è¯·</title>
    <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
  </head>
  <body>
    <button id="requestMicButton">è¯·æ±‚éº¦å…‹é£æƒé™</button>
    <script>
      // VConsole will be exported to `window.VConsole` by default.
      var vConsole = new window.VConsole();
    </script>

    <script>
      // @ts-ignore
      navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
      // const isSupportMediaDevicesMedia = () => {
      //   // @ts-ignore
      //   return !!(navigator.getUserMedia || (navigator.mediaDevices && navigator.mediaDevices.getUserMedia));
      // };
      // const isSupportUserMediaMedia = () => {
      //   // @ts-ignore
      //   return !!navigator.getUserMedia;
      // };

      // export const getUserMedia = (config, getStreamSuccess: (stream: MediaStream) => void, getStreamFail: (err: any) => void) => {
      //   if (isSupportMediaDevicesMedia()) {
      //     navigator.mediaDevices.getUserMedia(config).then(getStreamSuccess).catch(getStreamFail);
      //   } else if (isSupportUserMediaMedia()) {
      //     // @ts-ignore
      //     navigator.getUserMedia(config, getStreamSuccess, getStreamFail);
      //   } else {
      //     console.error(`[Log] æ— æ³•è·å–æµè§ˆå™¨å½•éŸ³åŠŸèƒ½ï¼Œè¯·å‡çº§æµè§ˆå™¨æˆ–ä½¿ç”¨chrome`);
      //   }
      // };

      document.getElementById('requestMicButton').addEventListener('click', async () => {
        console.log(`\x1B[1m\x1B[32m[ğŸ‘ğŸ‘ğŸ‘][2025-02-24 17:48:12] navigator.mediaDevices-->`, navigator.mediaDevices, navigator.mediaDevices.getUserMedia);
        navigator.mediaDevices
          .getUserMedia({ audio: true })
          .then((stream) => {
            alert('éº¦å…‹é£æƒé™å·²ç”³è¯·æˆåŠŸ');
          })
          .catch((error) => {
            alert(`éº¦å…‹é£æƒé™ç”³è¯·å¤±è´¥${JSON.stringify(error)}`);
          });
      });
    </script>
  </body>
</html>
