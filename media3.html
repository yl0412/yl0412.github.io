<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>è®¾å¤‡ä¿¡æ¯æ£€æµ‹ - å«éº¦å…‹é£/æ‰¬å£°å™¨</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Microsoft YaHei', Arial, sans-serif;
      }

      body {
        background-color: #f5f7fa;
        padding: 20px;
        line-height: 1.6;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
      }

      h1 {
        text-align: center;
        color: #333;
        margin-bottom: 30px;
        font-size: 24px;
      }

      .info-group {
        margin-bottom: 25px;
        padding-bottom: 20px;
        border-bottom: 1px solid #eee;
      }

      .info-group:last-child {
        border-bottom: none;
      }

      .info-group h2 {
        color: #409eff;
        font-size: 18px;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .info-item {
        display: flex;
        margin-bottom: 10px;
        padding: 8px 0;
      }

      .info-label {
        width: 140px;
        font-weight: 600;
        color: #666;
        flex-shrink: 0;
      }

      .info-value {
        color: #333;
        flex: 1;
        word-break: break-all;
      }

      .device-list {
        list-style: none;
        margin-top: 8px;
        padding-left: 140px;
      }

      .device-list li {
        margin-bottom: 6px;
        padding: 4px 8px;
        background: #f8f9fa;
        border-radius: 4px;
      }

      .status-success {
        color: #67c23a;
      }

      .status-warning {
        color: #e6a23c;
      }

      .status-error {
        color: #f56c6c;
      }

      .tip {
        font-size: 14px;
        color: #999;
        margin-top: 5px;
        padding-left: 140px;
      }

      /* ç§»åŠ¨ç«¯é€‚é… */
      @media (max-width: 600px) {
        .container {
          padding: 20px 15px;
        }

        .info-item {
          flex-direction: column;
        }

        .info-label {
          width: 100%;
          margin-bottom: 5px;
        }

        .device-list,
        .tip {
          padding-left: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>è®¾å¤‡ä¿¡æ¯æ£€æµ‹æµ‹è¯•é¡µé¢</h1>

      <!-- åŸºç¡€è®¾å¤‡ä¿¡æ¯ -->
      <div class="info-group">
        <h2>ğŸ“± åŸºç¡€è®¾å¤‡ä¿¡æ¯</h2>
        <div class="info-item">
          <span class="info-label">è®¾å¤‡ç±»å‹ï¼š</span>
          <span class="info-value" id="deviceType">æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">æ“ä½œç³»ç»Ÿï¼š</span>
          <span class="info-value" id="os">æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">æµè§ˆå™¨ï¼š</span>
          <span class="info-value" id="browser">æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">æµè§ˆå™¨ç‰ˆæœ¬ï¼š</span>
          <span class="info-value" id="browserVersion">æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">ç”¨æˆ·ä»£ç†ï¼ˆUAï¼‰ï¼š</span>
          <span class="info-value" id="userAgent">æ£€æµ‹ä¸­...</span>
        </div>
      </div>

      <!-- å±å¹•ä¸æ˜¾ç¤ºä¿¡æ¯ -->
      <div class="info-group">
        <h2>ğŸ–¥ï¸ å±å¹•ä¸æ˜¾ç¤ºä¿¡æ¯</h2>
        <div class="info-item">
          <span class="info-label">å±å¹•åˆ†è¾¨ç‡ï¼š</span>
          <span class="info-value" id="screenResolution">æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">çª—å£åˆ†è¾¨ç‡ï¼š</span>
          <span class="info-value" id="windowResolution">æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">åƒç´ å¯†åº¦ï¼ˆDPRï¼‰ï¼š</span>
          <span class="info-value" id="pixelRatio">æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">é¢œè‰²æ·±åº¦ï¼š</span>
          <span class="info-value" id="colorDepth">æ£€æµ‹ä¸­...</span>
        </div>
      </div>

      <!-- æ–°å¢ï¼šéº¦å…‹é£/æ‰¬å£°å™¨è®¾å¤‡ -->
      <div class="info-group">
        <h2>ğŸ¤ éŸ³é¢‘è®¾å¤‡ï¼ˆéº¦å…‹é£/æ‰¬å£°å™¨ï¼‰</h2>
        <div class="info-item">
          <span class="info-label">éº¦å…‹é£ï¼ˆè¾“å…¥ï¼‰ï¼š</span>
          <span class="info-value" id="audioInput">æ£€æµ‹ä¸­...ï¼ˆéœ€æˆæƒï¼‰</span>
        </div>
        <ul class="device-list" id="audioInputList"></ul>
        <div class="info-item" style="margin-top: 10px">
          <span class="info-label">æ‰¬å£°å™¨ï¼ˆè¾“å‡ºï¼‰ï¼š</span>
          <span class="info-value" id="audioOutput">æ£€æµ‹ä¸­...ï¼ˆéœ€æˆæƒï¼‰</span>
        </div>
        <ul class="device-list" id="audioOutputList"></ul>
        <p class="tip">æç¤ºï¼šéœ€å…è®¸æµè§ˆå™¨ã€Œåª’ä½“è®¾å¤‡ã€æƒé™ï¼Œæ‰èƒ½æ˜¾ç¤ºè®¾å¤‡è¯¦ç»†ä¿¡æ¯ï¼›éƒ¨åˆ†æµè§ˆå™¨éœ€HTTPSç¯å¢ƒï¼ˆæœ¬åœ°file://é™¤å¤–ï¼‰ã€‚</p>
      </div>

      <!-- ç½‘ç»œä¸è¿æ¥ä¿¡æ¯ -->
      <div class="info-group">
        <h2>ğŸŒ ç½‘ç»œä¸è¿æ¥ä¿¡æ¯</h2>
        <div class="info-item">
          <span class="info-label">ç½‘ç»œç±»å‹ï¼š</span>
          <span class="info-value" id="networkType">æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">ç½‘ç»œæœ‰æ•ˆå¸¦å®½ï¼š</span>
          <span class="info-value" id="downlink">æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">ç½‘ç»œå»¶è¿Ÿï¼š</span>
          <span class="info-value" id="rtt">æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">æ˜¯å¦åœ¨çº¿ï¼š</span>
          <span class="info-value" id="isOnline">æ£€æµ‹ä¸­...</span>
        </div>
      </div>

      <!-- ç”µæ± ä¸ç¡¬ä»¶ä¿¡æ¯ -->
      <div class="info-group">
        <h2>ğŸ”‹ ç”µæ± ä¸ç¡¬ä»¶ä¿¡æ¯</h2>
        <div class="info-item">
          <span class="info-label">ç”µæ± ç”µé‡ï¼š</span>
          <span class="info-value" id="batteryLevel">ä¸æ”¯æŒ/æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">æ˜¯å¦å……ç”µï¼š</span>
          <span class="info-value" id="batteryCharging">ä¸æ”¯æŒ/æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">ç¡¬ä»¶æ ¸å¿ƒæ•°ï¼š</span>
          <span class="info-value" id="hardwareConcurrency">æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">è®¾å¤‡å†…å­˜ï¼š</span>
          <span class="info-value" id="deviceMemory">ä¸æ”¯æŒ/æ£€æµ‹ä¸­...</span>
        </div>
      </div>

      <!-- å…¶ä»–ä¿¡æ¯ -->
      <div class="info-group">
        <h2>â„¹ï¸ å…¶ä»–ä¿¡æ¯</h2>
        <div class="info-item">
          <span class="info-label">è¯­è¨€ï¼š</span>
          <span class="info-value" id="language">æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">æ—¶åŒºï¼š</span>
          <span class="info-value" id="timezone">æ£€æµ‹ä¸­...</span>
        </div>
        <div class="info-item">
          <span class="info-label">æ˜¯å¦è§¦æ‘¸è®¾å¤‡ï¼š</span>
          <span class="info-value" id="isTouchDevice">æ£€æµ‹ä¸­...</span>
        </div>
      </div>
    </div>

    <script>
      // å·¥å…·å‡½æ•°ï¼šè·å–æ“ä½œç³»ç»Ÿ
      function getOS() {
        const userAgent = navigator.userAgent.toLowerCase();
        if (userAgent.includes('win')) return 'Windows';
        if (userAgent.includes('mac')) return 'macOS';
        if (userAgent.includes('linux')) return 'Linux';
        if (userAgent.includes('android')) return 'Android';
        if (userAgent.includes('iphone') || userAgent.includes('ipad')) return 'iOS';
        return 'æœªçŸ¥æ“ä½œç³»ç»Ÿ';
      }

      // å·¥å…·å‡½æ•°ï¼šè·å–æµè§ˆå™¨åŠç‰ˆæœ¬
      function getBrowser() {
        const userAgent = navigator.userAgent.toLowerCase();
        let browser = 'æœªçŸ¥æµè§ˆå™¨';
        let version = '';

        try {
          if (userAgent.includes('edge')) {
            browser = 'Edge';
            version = userAgent.match(/edge\/([\d.]+)/)[1];
          } else if (userAgent.includes('chrome')) {
            browser = 'Chrome';
            version = userAgent.match(/chrome\/([\d.]+)/)[1];
          } else if (userAgent.includes('firefox')) {
            browser = 'Firefox';
            version = userAgent.match(/firefox\/([\d.]+)/)[1];
          } else if (userAgent.includes('safari')) {
            browser = 'Safari';
            version = userAgent.match(/version\/([\d.]+)/)[1];
          } else if (userAgent.includes('opera')) {
            browser = 'Opera';
            version = userAgent.match(/opera\/([\d.]+)/)[1];
          } else if (userAgent.includes('msie') || userAgent.includes('trident')) {
            browser = 'Internet Explorer';
            version = userAgent.match(/(msie|rv:)([\d.]+)/)[2];
          }
        } catch (e) {
          version = 'æœªçŸ¥';
        }
        return { name: browser, version: version || 'æœªçŸ¥' };
      }

      // å·¥å…·å‡½æ•°ï¼šè·å–è®¾å¤‡ç±»å‹
      function getDeviceType() {
        const userAgent = navigator.userAgent.toLowerCase();
        if (userAgent.includes('mobile') || userAgent.includes('android') || userAgent.includes('iphone') || userAgent.includes('ipad')) {
          return userAgent.includes('ipad') ? 'å¹³æ¿' : 'æ‰‹æœº';
        }
        return 'ç”µè„‘';
      }

      // å·¥å…·å‡½æ•°ï¼šè·å–ç½‘ç»œä¿¡æ¯
      function getNetworkInfo() {
        const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
        if (!connection) return { type: 'ä¸æ”¯æŒ', downlink: 'ä¸æ”¯æŒ', rtt: 'ä¸æ”¯æŒ' };
        return {
          type: connection.effectiveType || 'æœªçŸ¥',
          downlink: connection.downlink ? `${connection.downlink} Mbps` : 'æœªçŸ¥',
          rtt: connection.rtt ? `${connection.rtt} ms` : 'æœªçŸ¥',
        };
      }

      // å·¥å…·å‡½æ•°ï¼šè·å–ç”µæ± ä¿¡æ¯
      async function getBatteryInfo() {
        try {
          if (navigator.getBattery) {
            const battery = await navigator.getBattery();
            return {
              level: `${Math.round(battery.level * 100)}%`,
              charging: battery.charging ? 'æ˜¯' : 'å¦',
            };
          }
        } catch (e) {
          console.log('ç”µæ± ä¿¡æ¯è·å–å¤±è´¥ï¼š', e);
        }
        return { level: 'ä¸æ”¯æŒ', charging: 'ä¸æ”¯æŒ' };
      }

      // æ–°å¢æ ¸å¿ƒå‡½æ•°ï¼šè·å–éº¦å…‹é£/æ‰¬å£°å™¨è®¾å¤‡
      async function getAudioDevices() {
        const audioInputEl = document.getElementById('audioInput');
        const audioInputListEl = document.getElementById('audioInputList');
        const audioOutputEl = document.getElementById('audioOutput');
        const audioOutputListEl = document.getElementById('audioOutputList');

        // æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒAPI
        if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {
          audioInputEl.innerHTML = '<span class="status-error">æµè§ˆå™¨ä¸æ”¯æŒ</span>';
          audioOutputEl.innerHTML = '<span class="status-error">æµè§ˆå™¨ä¸æ”¯æŒ</span>';
          return;
        }

        try {
          // å…ˆè¯·æ±‚åª’ä½“æƒé™ï¼ˆå¿…é¡»ï¼Œå¦åˆ™è®¾å¤‡ä¿¡æ¯ä¼šè¢«éšè—ï¼‰
          // ç”³è¯·ç©ºçš„æµï¼Œä»…ä¸ºè·å–æƒé™ï¼Œä¸å®é™…å¼€å¯è®¾å¤‡
          await navigator.mediaDevices.getUserMedia({ audio: true });
          // è·å–æ‰€æœ‰åª’ä½“è®¾å¤‡
          const devices = await navigator.mediaDevices.enumerateDevices();

          // åˆ†ç±»ç­›é€‰ï¼šéŸ³é¢‘è¾“å…¥ï¼ˆéº¦å…‹é£ï¼‰ã€éŸ³é¢‘è¾“å‡ºï¼ˆæ‰¬å£°å™¨/è€³æœºï¼‰
          const audioInputs = devices.filter((d) => d.kind === 'audioinput');
          const audioOutputs = devices.filter((d) => d.kind === 'audiooutput');

          // æ¸²æŸ“éº¦å…‹é£è®¾å¤‡
          if (audioInputs.length === 0) {
            audioInputEl.innerHTML = '<span class="status-warning">æœªæ£€æµ‹åˆ°éº¦å…‹é£</span>';
          } else {
            audioInputEl.innerHTML = `<span class="status-success">å…±${audioInputs.length}ä¸ª</span>`;
            audioInputListEl.innerHTML = audioInputs
              .map((d, i) => `<li>${i + 1}. åç§°ï¼š${d.label || 'æœªçŸ¥è®¾å¤‡'} | IDï¼š${d.deviceId.slice(0, 10)}***</li>`)
              .join('');
          }

          // æ¸²æŸ“æ‰¬å£°å™¨è®¾å¤‡
          if (audioOutputs.length === 0) {
            audioOutputEl.innerHTML = '<span class="status-warning">æœªæ£€æµ‹åˆ°æ‰¬å£°å™¨</span>';
          } else {
            audioOutputEl.innerHTML = `<span class="status-success">å…±${audioOutputs.length}ä¸ª</span>`;
            audioOutputListEl.innerHTML = audioOutputs
              .map((d, i) => `<li>${i + 1}. åç§°ï¼š${d.label || 'æœªçŸ¥è®¾å¤‡'} | IDï¼š${d.deviceId.slice(0, 10)}***</li>`)
              .join('');
          }
        } catch (err) {
          // æƒé™è¢«æ‹’ç»/å…¶ä»–é”™è¯¯
          audioInputEl.innerHTML = '<span class="status-error">æƒé™è¢«æ‹’ç»/è·å–å¤±è´¥</span>';
          audioOutputEl.innerHTML = '<span class="status-error">æƒé™è¢«æ‹’ç»/è·å–å¤±è´¥</span>';
          console.log('éŸ³é¢‘è®¾å¤‡è·å–å¤±è´¥ï¼š', err.message);
        }
      }

      // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œæ‰€æœ‰æ£€æµ‹
      window.addEventListener('DOMContentLoaded', async () => {
        // 1. åŸºç¡€è®¾å¤‡ä¿¡æ¯
        const deviceType = getDeviceType();
        const os = getOS();
        const browser = getBrowser();
        const userAgent = navigator.userAgent;
        document.getElementById('deviceType').textContent = deviceType;
        document.getElementById('os').textContent = os;
        document.getElementById('browser').textContent = browser.name;
        document.getElementById('browserVersion').textContent = browser.version;
        document.getElementById('userAgent').textContent = userAgent;

        // 2. å±å¹•ä¸æ˜¾ç¤ºä¿¡æ¯
        const screenResolution = `${screen.width} Ã— ${screen.height}`;
        const windowResolution = `${window.innerWidth} Ã— ${window.innerHeight}`;
        const pixelRatio = window.devicePixelRatio.toFixed(2);
        const colorDepth = screen.colorDepth + ' ä½';
        document.getElementById('screenResolution').textContent = screenResolution;
        document.getElementById('windowResolution').textContent = windowResolution;
        document.getElementById('pixelRatio').textContent = pixelRatio;
        document.getElementById('colorDepth').textContent = colorDepth;

        // 3. æ ¸å¿ƒï¼šè·å–éº¦å…‹é£/æ‰¬å£°å™¨è®¾å¤‡ï¼ˆæ–°å¢ï¼‰
        await getAudioDevices();

        // 4. ç½‘ç»œä¸è¿æ¥ä¿¡æ¯
        const network = getNetworkInfo();
        const isOnline = navigator.onLine ? '<span class="status-success">æ˜¯</span>' : '<span class="status-error">å¦</span>';
        document.getElementById('networkType').textContent = network.type;
        document.getElementById('downlink').textContent = network.downlink;
        document.getElementById('rtt').textContent = network.rtt;
        document.getElementById('isOnline').innerHTML = isOnline;

        // 5. ç”µæ± ä¸ç¡¬ä»¶ä¿¡æ¯
        const battery = await getBatteryInfo();
        const hardwareConcurrency = navigator.hardwareConcurrency || 'æœªçŸ¥';
        const deviceMemory = navigator.deviceMemory ? `${navigator.deviceMemory} GB` : 'ä¸æ”¯æŒ';
        document.getElementById('batteryLevel').textContent = battery.level;
        document.getElementById('batteryCharging').textContent = battery.charging;
        document.getElementById('hardwareConcurrency').textContent = hardwareConcurrency;
        document.getElementById('deviceMemory').textContent = deviceMemory;

        // 6. å…¶ä»–ä¿¡æ¯
        const language = navigator.language || 'æœªçŸ¥';
        const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone || 'æœªçŸ¥';
        const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0 ? 'æ˜¯' : 'å¦';
        document.getElementById('language').textContent = language;
        document.getElementById('timezone').textContent = timezone;
        document.getElementById('isTouchDevice').textContent = isTouchDevice;
      });
    </script>
  </body>
</html>
